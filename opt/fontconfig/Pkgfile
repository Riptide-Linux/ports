# Description: A library for configuring and customizing font access
# URL: http://fontconfig.org/wiki/
# Maintainer: Jose V Beneyto, sepen at crux dot nu
# Packager: Tilman Sauerbeck, tilman at crux dot nu
# Depends on: freetype, expat

name=fontconfig
version=2.10.2
release=1
source=(http://fontconfig.org/release/$name-$version.tar.bz2)

build() {
    cd $name-$version

    sed -e 's|^confdir=.*|confdir=@baseconfigdir@|' -i $name.pc.in

    ./configure --prefix=/usr \
                --sysconfdir=/etc \
                --mandir=/usr/man \
                --localstatedir=/var \
                --with-xmldir=/etc/fonts \
                --with-templatedir=/etc/fonts/conf.avail

    make
    make DESTDIR=$PKG install

    # Enabling autohinting by default
    pushd $PKG/etc/fonts/conf.d
    ln -sf /etc/fonts/conf.avail/10-autohint.conf
    popd

    rm -f $PKG/etc/fonts/conf.d/README
    rm -r $PKG/usr/share
}
